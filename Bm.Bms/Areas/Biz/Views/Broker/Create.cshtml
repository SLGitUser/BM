@model Bm.Models.Dp.Broker
@using Bm.Modules.Html
@using Bm.Services.Dp

@section Header{
    <script src="~/Scripts/init.js"></script>
    <link rel="stylesheet" href="~/Content/css/app.min.css">
}

<script type="text/javascript">
    function bindNameByNo(no, name) {
        var getno = document.getElementsByName(no);
        var getname = document.getElementsByName(name);
        $(getno).change(function() {
            var vala = $(this).val();
            $.ajax({
                url: "/Base/TableDataApi/GetDataByTable",
                data: { tableName: "dp_brokerage_firm", no: "FirmNo", noVal: vala, name: "Name" },
                type:"get",
                dataType: "json"
            }).done(function (data) {
                $(getname).val(data);
            });
            
            //console.info(val+"   "+val2);
        });
    }
    $(function() {
        bindNameByNo("FirmNo", "Firm");
    });
</script>
    @section PageHead {
        <h1>新增经纪人信息<small></small></h1>
        <ol class="breadcrumb">
            <li><a href="/"><i class="fa fa-dashboard"></i>首页</a></li>
            <li><a href="@Url.Action("Index")"><i class="fa fa-book"></i>经纪人</a></li>
            <li class="active">新增经纪人信息</li>
        </ol>
    }

    <!-- Main content -->
    <section class="content">
        <div class="box box-info">
            <div class="box-header with-border">
                <h3 class="box-title">新增经纪人信息</h3>
            </div>
            <form class="form-horizontal" action="@Url.Action("Create")" method="POST">
                <div class="box-body">
                    @Html.InputFor(m => m.No)
                    @Html.InputFor(m => m.Name)
                    @Html.InputFor(m => m.Mobile)
                    @Html.InputFor(m => m.Email)
                    @Html.InputFor(m => m.City)
                    @Html.InputFor(m => m.CityNo)
                    @Html.InputFor(m => m.Gender, SelectListFactory.SexSelectList(), new { @class = "form-control " })
                    @Html.InputFor(m => m.FirmNo, SelectListFactory.BrokerageAllNo())
                    @Html.InputFor(m => m.Firm)
                    @Html.InputFor(m => m.Intro)
                    @Html.InputFor(m => m.RegAt)
                    @Html.InputFor(m => m.Referral)
                    <div class="form-group col-sm-12 col-md-6 col-lg-4">
                        <label for="AddrPic" class="control-label col-sm-3">位置图片</label>
                        <div class="col-sm-9">
                            <input type="file" class="form-control" id="AddrPic">
                        </div>
                    </div>
                </div>
                <!-- /.box-body -->
                <div class="box-footer">
                    <button type="submit" class="btn bg-blue btn-flat margin">确认提交</button>
                    <a href="@Url.Action("Index")" class="btn btn-default btn-flat margin"><i class="fa fa-mail-reply"></i> 返回列表</a>
                </div>
                <!-- /.box-footer -->

            </form>
        </div>
    </section>